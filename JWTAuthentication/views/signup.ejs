<!-- <!DOCTYPE html>
<html>
    <head>
        <title>
            SignUp Page
        </title>
    </head>
    <body>
        <p>This is page is for resgistaration.</p>

         <form action="/register" method="POST">
                      
            <h1> Signup form </h1>
                              
            <input class="box" type="text" name="name" id="name" 
            placeholder="Name"  required /><br>
                              
            <input class="box" type="email" name="email" id="email" 
            placeholder="E-Mail " required /><br>
                              
            <input class="box" type="password" name="password" 
            id="password" placeholder="Password " required/><br>
                              
            <br>
            <input type="submit" id="submitDetails"  
            name="submitDetails" value="Submit" /><br>
                      
        </form>

    </body>
</html> -->

<!DOCTYPE html>
<html>
    <head>
        <title>
            SignUp Page
        </title>

        <script>

            function submitData(event){

                console.log('Submiting the form2');

                var name = event.name.value;
                var email = event.email.value;
                var password = event.password.value;


               

               let json = JSON.stringify({
                name: name,
                email: email,
                password: password
               });

                const xhr = new XMLHttpRequest();
                console.log("POsting");

                xhr.open('POST','/register');

                console.log("Headers1");
                 // set headers
                xhr.setRequestHeader('Content-type', 'application/json; charset=utf-8');

                console.log('Sending');

                //xhr.send(data);

                xhr.send(json);

                console.log('Sent5');
                xhr.onload = () => {
                   if(xhr.status==200){
                    window.location.href = '/login';
                   }
                   else{
                    alert("Some Error Occurred. Please Check your email.");
                    console.log(xhr.response);
                   }
                } 



            }

        </script>
    </head>
    <body>
        <p>This is page is for resgistaration.</p>

         <form name = 'user' action="javascript:void(0);" id="formData" onsubmit="submitData(this)" method="POST">
                      
            <h1> Signup form </h1>
                              
            <input class="box" type="text" name="name" id="name" 
            placeholder="Name"  required /><br>
                              
            <input class="box" type="email" name="email" id="email" 
            placeholder="E-Mail " required /><br>
                              
            <input class="box" type="password" name="password" 
            id="password" placeholder="Password " required/><br>
                              
            <br>
            <button type="submit" id="submitDetails"  
            name="submitDetails" value="Submit" /><br>
                      
        </form>

    </body>
</html>